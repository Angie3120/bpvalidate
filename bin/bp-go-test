#!/bin/sh

#script to test that things are working

for chain in mainnet bos telos
do
	echo "---------- chain: $chain -----------"

	#rm -r /var/www/html/$chain

	./bp-schema --chain=$chain
	./bp-website-chain --chain=$chain --out=/var/www/html/ --config=../config/
	#./bp-validate --chain=$chain --output=/var/www/html/$chain/bps.json --versions=../config/versions.csv --limit=1000 --debug --producer=alohaeosprod,eosnationftw,cryptolions1,eoscanadacom,bitfinexeos1,hexlantttttt,eosriobrazil,acroeos12345,eosriobrazil
	#./bp-validate --chain=$chain --output=/var/www/html/$chain/bps.json --versions=../config/versions.csv --limit=1000 --debug --producer=eosnationftw,teamgreymass,eosvipvipvip,eosbixinboot,eostitanprod,cypherglasss,blockgenesys
	#./bp-validate --chain=$chain --output=/var/www/html/$chain/bps.json --versions=../config/versions.csv --limit=1000 --debug --producer=eosliquideos,eosauthority,eosnationftw,atticlabeosb,cryptolions1,eosbeijingbp,eostribeprod,sheos21sheos,eosswedenorg
	#./bp-validate --chain=$chain --output=/var/www/html/$chain/bps.json --versions=../config/versions.csv --limit=1000 --debug
	#./bp-validate --chain=$chain --output=/var/www/html/$chain/bps.json --versions=../config/versions.csv --chains=../config/chains.csv --limit=1000 --debug --producer=eosnationftw,bosnationftw,kainosblkpro,eosiodetroit,bosriobrazil,boseouldotio
	#./bp-validate --chain=$chain --output=/var/www/html/$chain/bps.json --versions=../config/versions_${chain}.csv --chains=../config/chains.csv --limit=1000 --debug --producer=bosnationftw,bosriobrazil,boseouldotio
	./bp-report-errors --chain=$chain --input=/var/www/html/$chain/bps.json --out=/var/www/html/ --config=../config/
	./bp-report-producers --chain=$chain --input=/var/www/html/$chain/bps.json --out=/var/www/html/ --config=../config/
	./bp-report-endpoints --chain=$chain --input=/var/www/html/$chain/bps.json --out=/var/www/html/ --config=../config/
	./bp-report-node_types --chain=$chain --input=/var/www/html/$chain/bps.json --out=/var/www/html/ --config=../config/
	./bp-report-resources --chain=$chain --input=/var/www/html/$chain/bps.json --out=/var/www/html/ --config=../config/
	./bp-report-api-versions --chain=$chain --input=/var/www/html/$chain/bps.json --out=/var/www/html/ --config=../config/
	./bp-report-country --chain=$chain --input=/var/www/html/$chain/bps.json --out=/var/www/html/ --config=../config/
	./bp-report-timezone --chain=$chain --input=/var/www/html/$chain/bps.json --out=/var/www/html/ --config=../config/
	./bp-report-config --chain=$chain --input=/var/www/html/$chain/bps.json --out=/var/www/html/ --config=../config/
	./bp-report-blacklist --chain=$chain --input=/var/www/html/$chain/bps.json --out=/var/www/html/ --config=../config/
	./bp-report-producer-version --chain=$chain --input=/var/www/html/$chain/bps.json --out=/var/www/html/ --config=../config/
	./bp-report-producer-cpu --chain=$chain --input=/var/www/html/$chain/bps.json --out=/var/www/html/ --config=../config/
	./bp-report-producer-virtualization --chain=$chain --input=/var/www/html/$chain/bps.json --out=/var/www/html/ --config=../config/
	./bp-report-producer-hbversion --chain=$chain --input=/var/www/html/$chain/bps.json --out=/var/www/html/ --config=../config/
done

echo "---------- generate website -----------"

./bp-website-builder --out=/var/www/html/ --config=../config/
